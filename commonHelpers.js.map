{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorIcon from '../img/error.svg';\nimport closeIcon from '../img/close.svg';\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('.timer-start-btn');\nconst daysOutput = document.querySelector('span[data-days]');\nconst hoursOutput = document.querySelector('span[data-hours]');\nconst minutesOutput = document.querySelector('span[data-minutes]');\nconst secondsOutput = document.querySelector('span[data-seconds]');\n\nlet userSelectedDate;\nlet diff;\nlet isActive = false;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    userSelectedDate = new Date(input.value).getTime();\n    const currentDate = new Date().getTime();\n    function onBtnClick() {\n      diff = userSelectedDate - currentDate;\n      const intervalId = setInterval(() => {\n        diff -= 1000;\n        const time = convertMs(diff);\n        const { days, hours, minutes, seconds } = time;\n        daysOutput.textContent = addLeadingZero(days);\n        hoursOutput.textContent = addLeadingZero(hours);\n        minutesOutput.textContent = addLeadingZero(minutes);\n        secondsOutput.textContent = addLeadingZero(seconds);\n        if (diff <= 1000) {\n          clearInterval(intervalId);\n        }\n      }, 1000);\n      input.disabled = true;\n      input.classList.add('datetime-picker-disabled');\n      startBtn.disabled = true;\n      startBtn.classList.remove('timer-start-btn-able');\n      startBtn.removeEventListener('click', onBtnClick);\n    }\n    if (currentDate > userSelectedDate) {\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        messageColor: '#fff',\n        messageSize: '16',\n        backgroundColor: '#ef4040',\n        progressBarColor: '#b51b1b',\n        position: 'topRight',\n        iconUrl: errorIcon,\n        close: false,\n        buttons: [\n          [\n            `<button type=\"submit\" style=\"background-color: inherit\"><img src='${closeIcon}'/></button>`,\n            function (instance, toast) {\n              instance.hide(\n                {\n                  transitionOut: 'fadeOut',\n                },\n                toast\n              );\n            },\n          ],\n        ],\n      });\n      startBtn.disabled = true;\n      startBtn.classList.remove('timer-start-btn-able');\n      startBtn.removeEventListener('click', onBtnClick);\n    } else {\n      startBtn.disabled = false;\n      startBtn.classList.add('timer-start-btn-able');\n      if (!isActive) {\n        startBtn.addEventListener('click', onBtnClick);\n        isActive = true;\n      }\n    }\n  },\n};\nconst fp = flatpickr(input, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n"],"names":["input","startBtn","daysOutput","hoursOutput","minutesOutput","secondsOutput","userSelectedDate","diff","isActive","options","selectedDates","currentDate","onBtnClick","intervalId","time","convertMs","days","hours","minutes","seconds","addLeadingZero","iziToast","errorIcon","closeIcon","instance","toast","flatpickr","ms","value"],"mappings":"iJAOA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,kBAAkB,EACpDC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAc,SAAS,cAAc,kBAAkB,EACvDC,EAAgB,SAAS,cAAc,oBAAoB,EAC3DC,EAAgB,SAAS,cAAc,oBAAoB,EAEjE,IAAIC,EACAC,EACAC,EAAW,GACf,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBJ,EAAmBI,EAAc,CAAC,EAClCJ,EAAmB,IAAI,KAAKN,EAAM,KAAK,EAAE,QAAO,EAChD,MAAMW,EAAc,IAAI,KAAM,EAAC,QAAO,EACtC,SAASC,GAAa,CACpBL,EAAOD,EAAmBK,EAC1B,MAAME,EAAa,YAAY,IAAM,CACnCN,GAAQ,IACR,MAAMO,EAAOC,EAAUR,CAAI,EACrB,CAAE,KAAAS,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAC1CZ,EAAW,YAAckB,EAAeJ,CAAI,EAC5Cb,EAAY,YAAciB,EAAeH,CAAK,EAC9Cb,EAAc,YAAcgB,EAAeF,CAAO,EAClDb,EAAc,YAAce,EAAeD,CAAO,EAC9CZ,GAAQ,KACV,cAAcM,CAAU,CAE3B,EAAE,GAAI,EACPb,EAAM,SAAW,GACjBA,EAAM,UAAU,IAAI,0BAA0B,EAC9CC,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,sBAAsB,EAChDA,EAAS,oBAAoB,QAASW,CAAU,CACjD,CACGD,EAAcL,GAChBe,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,OACd,YAAa,KACb,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,WACV,QAASC,EACT,MAAO,GACP,QAAS,CACP,CACE,qEAAqEC,CAAS,eAC9E,SAAUC,EAAUC,EAAO,CACzBD,EAAS,KACP,CACE,cAAe,SAChB,EACDC,CAChB,CACa,CACF,CACF,CACT,CAAO,EACDxB,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,sBAAsB,EAChDA,EAAS,oBAAoB,QAASW,CAAU,IAEhDX,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,sBAAsB,EACxCO,IACHP,EAAS,iBAAiB,QAASW,CAAU,EAC7CJ,EAAW,IAGhB,CACH,EACWkB,EAAU1B,EAAOS,CAAO,EAEnC,SAASM,EAAUY,EAAI,CAKrB,MAAMX,EAAO,KAAK,MAAMW,EAAK,KAAG,EAC1BV,EAAQ,KAAK,MAAOU,EAAK,MAAO,IAAI,EACpCT,EAAU,KAAK,MAAQS,EAAK,MAAO,KAAQ,GAAM,EACjDR,EAAU,KAAK,MAASQ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeQ,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC"}